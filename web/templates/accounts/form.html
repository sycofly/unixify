{{define "title"}}{{if .Account.ID}}Edit Account{{else}}New Account{{end}}{{end}}

{{define "content"}}
<div class="card">
    <div class="card-header">
        <h1>{{if .Account.ID}}Edit Account{{else}}New Account{{end}}</h1>
        <a href="/accounts" class="btn btn-secondary">Back to Accounts</a>
    </div>

    <form hx-boost="true" method="POST" action="{{if .Account.ID}}/accounts/{{.Account.ID}}{{else}}/accounts{{end}}">
        {{if .Account.ID}}
        <input type="hidden" name="_method" value="PUT">
        {{end}}
        
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" name="username" value="{{.Account.Username}}" required>
        </div>
        
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" value="{{.Account.Email}}" required>
        </div>
        
        <div class="form-group">
            <label for="full_name">Full Name</label>
            <input type="text" id="full_name" name="full_name" value="{{.Account.FullName}}" required>
        </div>
        
        <div class="form-group">
            <label for="password">Password {{if .Account.ID}}(leave empty to keep current){{end}}</label>
            <input type="password" id="password" name="password" {{if not .Account.ID}}required{{end}}>
        </div>
        
        <div class="form-group">
            <label for="password_confirm">Confirm Password</label>
            <input type="password" id="password_confirm" name="password_confirm" {{if not .Account.ID}}required{{end}}>
        </div>
        
        <div class="form-group">
            <label>Groups</label>
            <div class="checkbox-list">
                {{range .AllGroups}}
                <div class="checkbox-item">
                    <input type="checkbox" id="group_{{.ID}}" name="groups[]" value="{{.ID}}" 
                        {{range $.Account.Groups}}{{if eq .ID $.ID}}checked{{end}}{{end}}>
                    <label for="group_{{.ID}}">{{.Name}}</label>
                </div>
                {{end}}
            </div>
        </div>
        
        <div class="form-group">
            <label for="active">Status</label>
            <select id="active" name="active">
                <option value="true" {{if .Account.Active}}selected{{end}}>Active</option>
                <option value="false" {{if not .Account.Active}}selected{{end}}>Inactive</option>
            </select>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn">Save</button>
            <a href="/accounts" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{{end}}